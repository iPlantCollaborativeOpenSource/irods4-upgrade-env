dbmsdata:
  build: .
  dockerfile: dbms-data.Dockerfile
  volumes:
    - /dbms-data:/var/lib/postgresql/data

rsdata:
  build: .
  dockerfile: rs-data.Dockerfile
  volumes:
    - /rs-data:/home/irods/iRODS/Vault

dbms:
  build: .
  dockerfile: irods3.3.1-dbms.Dockerfile
  env_file: env.properties
  hostname: dbms
  volumes_from:
    - dbmsdata

ies:
  build: .
  dockerfile: irods3.3.1-ies.Dockerfile
  env_file: env.properties
  hostname: ies
  links:
    - dbms
  tty: true

rs:
  build: .
  dockerfile: irods3.3.1-rs.Dockerfile
  env_file: env.properties
  hostname: rs
  links:
    - ies
  tty: true
  volumes_from:
    - rsdata

icommands:
  build: .
  dockerfile: icommands3.3.1.Dockerfile
  env_file: env.properties
  links:
    - ies
    - rs
